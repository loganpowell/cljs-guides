{"version":3,"file":"ajax.ring.js","sources":["ajax/ring.cljc"],"mappings":";;;;;AAKA,2BAAA,3BAAMA,8DAAgBC;AAAtB,AACE,sDAAeC;AAAf,AAAA,kDAAA,2FAAA,qGAAA,tIACW,AAACC,uBAAQD,qEACR,AAACE,gCAAiBF,gEACrB,CAACD,0CAAAA,oDAAAA,ZAAUC,gCAAAA;;;AAEtB,AAAA;;;;;;;;iCAAA,yCAAAG,1EAAME;AAAN,AAAA,IAAAD,WAAA,AAAA;AAAA,AAAA,QAAAA;KAAA;AAAA,OAAAC;;;KAAA;AAAA,OAAAA,6DAAA,CAAA,UAAA;;;;AAAA,MAAA,KAAAC,MAAA,CAAA,8DAAA,AAAA;;;;;AAAA,AAAA,+DAAA,/DAAMD;AAAN,AAOM,oEAAA,2CAAA,xGAACS,kKAA8B,AAACC;;;AAPtC,AAAA,+DAAA,WAAAR,1EAAMF;AAAN,AAAA,IAAAG,aAAAD;IAAAC,iBAAA,EAAA,EAAA,EAAA,CAAAA,cAAA,QAAA,EAAA,EAAA,CAAA,AAAAA,iDAAA,WAAA,CAAAC,gCAAA,AAAAD,+BAAA,KAAA,OAAA,QAAA,AAAAE,8CAAAC,mBAAAH,YAAAA;IAAAI,aAAA,AAAAC,4CAAAL,eAAA;IAAAI,iBAAA,EAAA,EAAA,EAAA,CAAAA,cAAA,QAAA,EAAA,EAAA,CAAA,AAAAA,iDAAA,WAAA,CAAAH,gCAAA,AAAAG,+BAAA,KAAA,OAAA,QAAA,AAAAF,8CAAAC,mBAAAC,YAAAA;WAAA,AAAAC,4CAAAD,eAAA,lEAQaI;kBARb,AAAAH,4CAAAD,eAAA,zEAQkBK;mBARlB,AAAAJ,4CAAAD,eAAA,1EAQ8BM;AAR9B,AASG,gDAAA,2CAAA,oFAAA,gJAAA,xTAACC,yIAA2B,AAACrB,yBAAekB,0EACT,CAAA,oDAAaC,4FACZC;;;AAXvC,AAAA,yDAAA,zDAAMb;;AAAN","names":["ajax.ring/make-ring-read","body-read","response","ajax.protocols/-status","ajax.protocols/-get-all-headers","var_args","G__36417","ajax.ring/ring-response-format","js/Error","p__36423","map__36424","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","map__36425","cljs.core.get.cljs$core$IFn$_invoke$arity$2","ajax.ring.ring_response_format.cljs$core$IFn$_invoke$arity$1","ajax.formats.raw_response_format.cljs$core$IFn$_invoke$arity$0","read","description","content-type","ajax.interceptors/map->ResponseFormat"],"sourcesContent":["(ns ajax.ring\n  (:require [ajax.interceptors :refer [map->ResponseFormat]]\n            [ajax.protocols :refer [-status -get-all-headers -body]]\n            [ajax.formats :as f]))\n\n(defn make-ring-read [body-read]\n  (fn ring-read [response]\n    {:status (-status response)\n     :headers (-get-all-headers response)\n     :body (body-read response)}))\n\n(defn ring-response-format\n  \"Returns a Ring-compatible response map.\n\n   Optionally can be passed a :format option. This should be another\n   response-format map. If format is provided it will be used to\n   specify the content-type, and the read method will be used to\n   populate the :body key in the response map.\"\n  ([] (ring-response-format {:format (f/raw-response-format)}))\n  ([{{:keys [read description content-type]} :format}]\n   (map->ResponseFormat {:read (make-ring-read read)\n                         :description (str \"ring/\" description)\n                         :content-type content-type})))\n"]}